import"./date-7940da18.js";import{h as b,c as w}from"./locale-bde6d0f6.js";import{a as u}from"./Error-21d1d076.js";import"./typedArrayUtil-2af43698.js";import{f as U,u as y}from"./messages-2d262041.js";import{U as R}from"./request-a10d6950.js";import{n as x}from"./assets-6fd92e57.js";const B={ar:"ar-u-nu-latn"};let a=new WeakMap,d={};function L(n){const t=n||d;if(!a.has(t)){const e=w(),r=B[w()]||e;a.set(t,new Intl.NumberFormat(r,n))}return a.get(t)}function O(n={}){const t={};return n.digitSeparator!=null&&(t.useGrouping=n.digitSeparator),n.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=n.places),t}function v(n,t){return Object.is(n,-0)&&(n=0),L(t).format(n)}b(()=>{a=new WeakMap,d={}});async function k(n,t,e,r){const o=t.exec(e);if(!o)throw new u("esri-intl:invalid-bundle",`Bundle id "${e}" is not compatible with the pattern "${t}"`);const i=o[1]?`${o[1]}/`:"",l=o[2],f=U(r),s=`${i}${l}.json`,p=f?`${i}${l}_${f}.json`:s;let c;try{c=await h(n(p))}catch($){if(p===s)throw new u("intl:unknown-bundle",`Bundle "${e}" cannot be loaded`,{error:$});try{c=await h(n(s))}catch(g){throw new u("intl:unknown-bundle",`Bundle "${e}" cannot be loaded`,{error:g})}}return c}async function h(n){if(m.fetchBundleAsset!=null)return m.fetchBundleAsset(n);const t=await R(n,{responseType:"text"});return JSON.parse(t.data)}class A{constructor({base:t="",pattern:e,location:r=new URL(window.location.href)}){let o;o=typeof r=="string"?i=>new URL(i,new URL(r,window.location.href)).href:r instanceof URL?i=>new URL(i,r).href:r,this.pattern=typeof e=="string"?new RegExp(`^${e}`):e,this.getAssetUrl=o,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,e){return k(this.getAssetUrl,this.matcher,t,e)}}function j(n){return new A(n)}const m={};y(j({pattern:"esri/",location:x}));export{O as o,v as u};
