import{$ as l,j as c}from"./utils-df330680.js";import{o as f}from"./jsonContext-70ccb9b3.js";import{l as y,a as d,f as v}from"./portalItemUtils-8aceb0b8.js";import{p as i}from"./resourceUtils-1b55d47f.js";import"./Error-21d1d076.js";import"./typedArrayUtil-2af43698.js";import"./originUtils-cfe4feaf.js";import"./multiOriginJSONSupportUtils-c978f4c3.js";import"./Portal-cb507469.js";import"./request-a10d6950.js";import"./JSONSupport-acf2865c.js";import"./subclass-f7409b1b.js";import"./promiseUtils-1d963c7c.js";import"./time-0817624a.js";import"./Loadable-8a1ead8b.js";import"./Promise-ec74e14b.js";import"./Extent-2b4578b8.js";import"./SpatialReference-428523ee.js";import"./jsonMap-5ba4a9c2.js";import"./assets-6fd92e57.js";import"./cast-e7a2f9aa.js";import"./locale-bde6d0f6.js";import"./PortalItem-9d3416e3.js";import"./persistableUrlUtils-ca6bb38d.js";import"./saveAPIKeyUtils-7fbece8f.js";import"./saveUtils-534df74b.js";import"./projection-41da473c.js";import"./SimpleObservable-ae589a25.js";import"./mathUtils-19b6edfc.js";import"./Polyline-013cde1f.js";import"./aaBoundingRect-aef00841.js";import"./Axis-30be7e73.js";import"./projectBuffer-af7b4ad9.js";import"./zscale-d7e12601.js";import"./uuid-709b6c67.js";import"./resourceUtils-09076ff8.js";const m="Media Layer",x="media-layer-save",N="media-layer-save-as",p=["media-layer:unsupported-source"];function a(e){return{isValid:e.type==="media",errorMessage:"Layer.type should be 'media'"}}function s(e){return f(e,"portal-item",!0)}function n(e){return e.layerJSON}async function A(e,r){const{title:o,fullExtent:t}=e;r.title||(r.title=o),r.extent=t?await y(t):null,d(r,v.METADATA)}async function te(e,r){return l({layer:e,itemType:m,validateLayer:a,createJSONContext:o=>s(o),createItemData:n,errorNamePrefix:x,supplementalUnsupportedErrors:p,saveResources:(o,t)=>i(e.resourceReferences,t)},r)}async function oe(e,r,o){return c({layer:e,itemType:m,validateLayer:a,createJSONContext:t=>s(t),createItemData:n,errorNamePrefix:N,supplementalUnsupportedErrors:p,newItem:r,setItemProperties:A,saveResources:(t,u)=>i(e.resourceReferences,u)},o)}export{te as save,oe as saveAs};
