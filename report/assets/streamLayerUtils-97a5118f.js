import{$ as s,j as l}from"./utils-df330680.js";import{l as c,a as u,f as o,i as y}from"./portalItemUtils-8aceb0b8.js";import"./Error-21d1d076.js";import"./typedArrayUtil-2af43698.js";import"./originUtils-cfe4feaf.js";import"./multiOriginJSONSupportUtils-c978f4c3.js";import"./Portal-cb507469.js";import"./request-a10d6950.js";import"./JSONSupport-acf2865c.js";import"./subclass-f7409b1b.js";import"./promiseUtils-1d963c7c.js";import"./time-0817624a.js";import"./Loadable-8a1ead8b.js";import"./Promise-ec74e14b.js";import"./Extent-2b4578b8.js";import"./SpatialReference-428523ee.js";import"./jsonMap-5ba4a9c2.js";import"./assets-6fd92e57.js";import"./cast-e7a2f9aa.js";import"./locale-bde6d0f6.js";import"./PortalItem-9d3416e3.js";import"./persistableUrlUtils-ca6bb38d.js";import"./jsonContext-70ccb9b3.js";import"./saveAPIKeyUtils-7fbece8f.js";import"./saveUtils-534df74b.js";import"./projection-41da473c.js";import"./SimpleObservable-ae589a25.js";import"./mathUtils-19b6edfc.js";import"./Polyline-013cde1f.js";import"./aaBoundingRect-aef00841.js";import"./Axis-30be7e73.js";import"./projectBuffer-af7b4ad9.js";import"./zscale-d7e12601.js";const m="Stream Service",f="Feed",d="stream-layer-save",v="stream-layer-save-as";function a(t){return{isValid:t.type==="stream"&&!!t.url&&!t.webSocketUrl,errorMessage:"Stream layer should be created using a url to a stream service"}}function p(t){const r=t.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}async function x(t,r){const{parsedUrl:e,title:n,fullExtent:i}=t;r.url=e.path,r.title||(r.title=n),r.extent=null,i!=null&&(r.extent=await c(i)),u(r,o.METADATA),y(r,o.SINGLE_LAYER)}async function W(t,r){return s({layer:t,itemType:m,additionalItemType:f,validateLayer:a,createItemData:p,errorNamePrefix:d},r)}async function X(t,r,e){return l({layer:t,itemType:m,validateLayer:a,createItemData:p,errorNamePrefix:v,newItem:r,setItemProperties:x},e)}export{W as save,X as saveAs};
