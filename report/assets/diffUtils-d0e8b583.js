import{S as A}from"./JSONSupport-acf2865c.js";import{V}from"./Collection-aa6ef54b.js";import{t as D}from"./subclass-f7409b1b.js";const S=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function y(e){return e instanceof A}function h(e){return e instanceof V?Object.keys(e.items):y(e)?D(e).keys():e?Object.keys(e):[]}function a(e,n){return e instanceof V?e.items[n]:e[n]}function k(e,n){return!(!Array.isArray(e)||!Array.isArray(n))&&e.length!==n.length}function c(e){return e?e.declaredClass:null}function g(e,n){var b;const o=e.diff;if(o&&typeof o=="function")return o(e,n);const i=h(e),f=h(n);if(i.length===0&&f.length===0)return;if(!i.length||!f.length||k(e,n))return{type:"complete",oldValue:e,newValue:n};const s=f.filter(t=>!i.includes(t)),j=i.filter(t=>!f.includes(t)),m=i.filter(t=>f.includes(t)&&a(e,t)!==a(n,t)).concat(s,j).sort(),d=c(e);if(d&&S.has(d)&&m.length)return{type:"complete",oldValue:e,newValue:n};let p;const w=y(e)&&y(n);for(const t of m){const r=a(e,t),l=a(n,t);let u;if((w||typeof r!="function"&&typeof l!="function")&&r!==l&&(r!=null||l!=null)){if(o&&o[t]&&typeof o[t]=="function")u=(b=o[t])==null?void 0:b.call(o,r,l);else if(r instanceof Date&&l instanceof Date){if(r.getTime()===l.getTime())continue;u={type:"complete",oldValue:r,newValue:l}}else u=typeof r=="object"&&typeof l=="object"&&c(r)===c(l)?g(r,l):{type:"complete",oldValue:r,newValue:l};u!=null&&(p!=null?p.diff[t]=u:p={type:"partial",diff:{[t]:u}})}}return p}function x(e,n){return O(e,n)}function O(e,n){if(e==null)return!1;const o=n.split(".");let i=e;for(const f of o){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const s=i.diff[f];if(!s)return!1;i=s}}return!0}function q(e,n){if(!e)return!1;if(e.type==="partial"){const o=Object.keys(e.diff);return o.length===1&&o[0]===n}return!1}function v(e,n){if(typeof e!="function"&&typeof n!="function"&&(e!=null||n!=null))return e==null||n==null||typeof e=="object"&&typeof n=="object"&&c(e)!==c(n)?{type:"complete",oldValue:e,newValue:n}:g(e,n)}export{q as d,v as m,O as p,x as s};
