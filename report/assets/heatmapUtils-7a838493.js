import"./Extent-2b4578b8.js";import"./Polyline-013cde1f.js";import{e as $}from"./mathUtils-19b6edfc.js";import{e as P,u as w}from"./screenUtils-7afeb41c.js";import{_ as z}from"./vec42-a95eff2d.js";import{n as A}from"./vec4f64-430e4feb.js";const s=(n,t,r)=>[t,r],c=(n,t,r)=>[t,r,n[2]],m=(n,t,r)=>[t,r,n[2],n[3]];function _(n){return n?{originPosition:n.originPosition==="upper-left"?"upperLeft":n.originPosition==="lower-left"?"lowerLeft":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance]:[1,1],translate:n.extent!=null?[n.extent.xmin,n.extent.ymax]:[0,0]}:null}function M({scale:n,translate:t},r){return Math.round((r-t[0])/n[0])}function d({scale:n,translate:t},r){return Math.round((t[1]-r)/n[1])}function p({scale:n,translate:t},r){return r*n[0]+t[0]}function h({scale:n,translate:t},r){return t[1]-r*n[1]}function g(n,t,r){const o=new Array(r.length);if(!r.length)return o;const[i,l]=n.scale;let a=p(n,r[0][0]),e=h(n,r[0][1]);o[0]=t(r[0],a,e);for(let u=1;u<r.length;u++){const f=r[u];a+=f[0]*i,e-=f[1]*l,o[u]=t(f,a,e)}return o}function y(n,t,r){const o=new Array(r.length);for(let i=0;i<r.length;i++)o[i]=g(n,t,r[i]);return o}function L(n,t,r,o){return g(n,r?o?m:c:o?c:s,t)}function q(n,t,r,o){return y(n,r?o?m:c:o?c:s,t)}function U(n,t,r,o){return y(n,r?o?m:c:o?c:s,t)}function j(n,t,r,o,i){return t.x=M(n,r.x),t.y=d(n,r.y),t!==r&&(o&&(t.z=r.z),i&&(t.m=r.m)),t}function B(n,t,r,o,i){return r!=null&&(t.points=L(n,r.points,o,i)),t}function D(n,t,r,o,i){return r==null||(t.x=p(n,r.x),t.y=h(n,r.y),t!==r&&(o&&(t.z=r.z),i&&(t.m=r.m))),t}function F(n,t,r,o,i){return r!=null&&(t.rings=U(n,r.rings,o,i)),t}function G(n,t,r,o,i){return r!=null&&(t.paths=q(n,r.paths,o,i)),t}const x=2.4;function H(n){return P(n*x)}function J(n){return w(n)/x}function b(n,t,r,o){let{color:i,ratio:l}=t,{color:a,ratio:e}=r;e===l&&(e===1?l-=1e-6:e+=1e-6);const u=$((o-l)/(e-l),0,1);z(n,i.toArray(),a.toArray(),u)}function K(n){const r=new Uint8ClampedArray(2048);if(n=n.filter(({ratio:e})=>e>=0&&e<=1).sort((e,u)=>e.ratio-u.ratio).map(({color:e,ratio:u})=>({color:e,ratio:Math.max(u,.001)})),n.length<1)return r;let o=n[0],i=n[0],l=1;const a=A();for(let e=0;e<512;e++){const u=(e+.5)/512;for(;u>i.ratio&&l<n.length;)o=i,i=n[l++];b(a,o,i,u),r.set(a,4*e)}return r}function N(n,t,r){const o=Math.sqrt(n**2+t**2)/r;return o>1?0:3/(Math.PI*r**2)*(1-o**2)**2}function O(n){return typeof n=="function"?n:n?t=>+t[n]:()=>1}export{j as L,B as U,J as a,x as c,H as e,K as f,D as k,N as l,_ as m,F as q,O as u,G as v};
