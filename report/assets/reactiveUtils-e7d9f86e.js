import"./Evented-b5127116.js";import"./Collection-aa6ef54b.js";import{l as m,j as d,o as w,f as L,a as p,r as j,m as A,e as $}from"./promiseUtils-1d963c7c.js";import{w as h}from"./JSONSupport-acf2865c.js";import"./typedArrayUtil-2af43698.js";import"./Error-21d1d076.js";import"./subclass-f7409b1b.js";function q(n,r,i={}){return s(n,r,i,y)}function D(n,r,i={}){return s(n,r,i,v)}function s(n,r,i={},o){let e=null;const u=i.once?(t,l)=>{o(t)&&(m(e),r(t,l))}:(t,l)=>{o(t)&&r(t,l)};if(e=h(n,u,i.sync,i.equals),i.initial){const t=n();u(t,t)}return e}function E(n,r,i,o={}){let e=null,u=null,t=null;function l(){var c;e&&u&&(u.remove(),(c=o.onListenerRemove)==null||c.call(o,e),e=null,u=null)}function f(c){o.once&&o.once&&m(t),i(c)}const P=q(n,(c,C)=>{var a;l(),d(c)&&(e=c,u=w(c,r,f),(a=o.onListenerAdd)==null||a.call(o,c))},{sync:o.sync,initial:!0});return t=$(()=>{P.remove(),l()}),t}function F(n,r){return x(n,v,r)}function x(n,r,i){if(L(i))return Promise.reject(p());const o=n();if(r!=null&&r(o))return Promise.resolve(o);let e=null;function u(){e=m(e)}return new Promise((t,l)=>{e=j([A(i,()=>{u(),l(p())}),s(n,f=>{u(),t(f)},{sync:!1,once:!0},r??y)])})}function y(n){return!0}function v(n){return!!n}const G={sync:!0},H={initial:!0},I={sync:!0,initial:!0};export{I as A,G as C,H as P,q as d,D as p,E as v,F as w};
