import{k as R,a as y,d as f,B as s,b as u,r as p}from"./arcadeUtils-2b696ebb.js";import{s as d}from"./TimeOnly-e43464ca.js";import{u as l,b as w}from"./SpatialFilter-4d4462ce.js";import{n as a}from"./Extent-2b4578b8.js";import{relate as F,crosses as I,touches as A,within as P,overlaps as g,contains as C,intersects as h}from"./geometryEngineAsync-3f38ddd3.js";import"./geometry-31b45acd.js";import"./subclass-f7409b1b.js";import"./typedArrayUtil-2af43698.js";import"./Error-21d1d076.js";import"./promiseUtils-1d963c7c.js";import"./Polyline-013cde1f.js";import"./JSONSupport-acf2865c.js";import"./time-0817624a.js";import"./SpatialReference-428523ee.js";import"./jsonMap-5ba4a9c2.js";import"./request-a10d6950.js";import"./assets-6fd92e57.js";import"./aaBoundingRect-aef00841.js";import"./Axis-30be7e73.js";import"./mathUtils-19b6edfc.js";import"./typeUtils-3056a943.js";import"./ImmutableArray-ee1d0ce7.js";import"./Field-be948aef.js";import"./enumeration-4a4e87c4.js";import"./fieldType-4834e8bc.js";import"./datetime-7e00d9ef.js";import"./number-6ee739f3.js";import"./locale-bde6d0f6.js";import"./jsonUtils-2c7f966c.js";import"./featureConversionUtils-e62978d0.js";import"./aaBoundingBox-7242ce3e.js";import"./OptimizedFeature-0af09c7a.js";import"./OptimizedFeatureSet-1d1ac4b9.js";import"./OptimizedGeometry-5ad221bf.js";import"./FieldsIndex-9238b8b6.js";import"./UnknownTimeZone-8ede07af.js";import"./fieldUtils-fcb2a714.js";import"./intl-fe039018.js";import"./date-7940da18.js";import"./messages-2d262041.js";import"./Portal-cb507469.js";import"./Loadable-8a1ead8b.js";import"./Promise-ec74e14b.js";import"./WhereClause-239b807b.js";import"./cast-e7a2f9aa.js";import"./workers-1be2b889.js";import"./Connection-2d969448.js";import"./SimpleObservable-ae589a25.js";function c(n){return n instanceof a}function o(n,e,i,m){return m(n,e,async(S,t,r)=>{if(r.length<2)throw new u(n,p.WrongNumberOfParameters,e);if((r=R(r))[0]===null&&r[1]===null)return!1;if(s(r[0])){if(r[1]instanceof a)return new w({parentfeatureset:r[0],relation:i,relationGeom:r[1]});if(r[1]===null)return new l({parentfeatureset:r[0]});throw new u(n,p.InvalidParameter,e)}if(c(r[0])){if(c(r[1])){switch(i){case"esriSpatialRelEnvelopeIntersects":return h(d(r[0]),d(r[1]));case"esriSpatialRelIntersects":return h(r[0],r[1]);case"esriSpatialRelContains":return C(r[0],r[1]);case"esriSpatialRelOverlaps":return g(r[0],r[1]);case"esriSpatialRelWithin":return P(r[0],r[1]);case"esriSpatialRelTouches":return A(r[0],r[1]);case"esriSpatialRelCrosses":return I(r[0],r[1])}throw new u(n,p.InvalidParameter,e)}if(s(r[1]))return new w({parentfeatureset:r[1],relation:i,relationGeom:r[0]});if(r[1]===null)return!1;throw new u(n,p.InvalidParameter,e)}if(r[0]!==null)throw new u(n,p.InvalidParameter,e);return s(r[1])?new l({parentfeatureset:r[1]}):!(r[1]instanceof a||r[1]===null)&&void 0})}function Fr(n){n.mode==="async"&&(n.functions.intersects=function(e,i){return o(e,i,"esriSpatialRelIntersects",n.standardFunctionAsync)},n.functions.envelopeintersects=function(e,i){return o(e,i,"esriSpatialRelEnvelopeIntersects",n.standardFunctionAsync)},n.signatures.push({name:"envelopeintersects",min:2,max:2}),n.functions.contains=function(e,i){return o(e,i,"esriSpatialRelContains",n.standardFunctionAsync)},n.functions.overlaps=function(e,i){return o(e,i,"esriSpatialRelOverlaps",n.standardFunctionAsync)},n.functions.within=function(e,i){return o(e,i,"esriSpatialRelWithin",n.standardFunctionAsync)},n.functions.touches=function(e,i){return o(e,i,"esriSpatialRelTouches",n.standardFunctionAsync)},n.functions.crosses=function(e,i){return o(e,i,"esriSpatialRelCrosses",n.standardFunctionAsync)},n.functions.relate=function(e,i){return n.standardFunctionAsync(e,i,(m,S,t)=>{if(t=R(t),y(t,3,3,e,i),c(t[0])&&c(t[1]))return F(t[0],t[1],f(t[2]));if(t[0]instanceof a&&t[1]===null||t[1]instanceof a&&t[0]===null)return!1;if(s(t[0])&&t[1]===null)return new l({parentfeatureset:t[0]});if(s(t[1])&&t[0]===null)return new l({parentfeatureset:t[1]});if(s(t[0])&&t[1]instanceof a)return t[0].relate(t[1],f(t[2]));if(s(t[1])&&t[0]instanceof a)return t[1].relate(t[0],f(t[2]));if(t[0]===null&&t[1]===null)return!1;throw new u(e,p.InvalidParameter,i)})})}export{Fr as registerFunctions};
