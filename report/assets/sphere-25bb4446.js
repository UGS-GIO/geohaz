import"./typedArrayUtil-2af43698.js";import{s as Y}from"./Error-21d1d076.js";import{P as j,s as a,m as v,v as O,n as l,d as k,i as g,j as $,g as p,a as B,x as w,f as P,O as D,T as F,z as G,U as _,b as q,Q as I,R as J,H as K}from"./mathUtils-19b6edfc.js";import{p as W}from"./mat4-a6ac6b0f.js";import{L as z,a as b}from"./vec42-a95eff2d.js";import{n as E,r as C}from"./vec4f64-430e4feb.js";import{n as d}from"./Axis-30be7e73.js";import{s as tt}from"./ObjectStack-80adc7e7.js";import{c as f,f as nt}from"./plane-f835f029.js";function et(t,e){const n=j(t,e)/(a(t)*a(e));return-v(n)}function Z(t){return t?T(O(t.origin),O(t.direction)):T(l(),l())}function T(t,e){return{origin:t,direction:e}}function Ct(t,e){const n=it.get();return n.origin=t,n.direction=e,n}function ot(t,e,n=Z()){return k(n.origin,t),g(n.direction,e,t),n}function rt(t,e,n){const o=j(t.direction,g(n,e,t.origin));return $(n,t.origin,p(n,t.direction,o)),n}const it=new tt(()=>Z()),st=A();function A(){return E()}const ct=z,ut=z;function H(t,e){return b(e,t)}function at(t,e){return C(t[0],t[1],t[2],e)}function ft(t){return t}function gt(t){t[0]=t[1]=t[2]=t[3]=0}function lt(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function M(t){return t[3]}function pt(t){return t}function mt(t,e,n,o){return C(t,e,n,o)}function dt(t,e,n){return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=t[3]+e,n}function ht(t,e,n){return Y.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t!==n&&H(t,n),n}function x(t,e,n){if(e==null||!N(t,e,h))return!1;let{t0:o,t1:r}=h;if((o<0||r<o&&r>0)&&(o=r),o<0)return!1;if(n){const{origin:i,direction:s}=e;n[0]=i[0]+s[0]*o,n[1]=i[1]+s[1]*o,n[2]=i[2]+s[2]*o}return!0}function $t(t,e,n){const o=ot(e,n);if(!N(t,o,h))return[];const{origin:r,direction:i}=o,{t0:s,t1:c}=h,u=m=>{const y=l();return K(y,r,i,m),L(t,y,y)};return Math.abs(s-c)<B()?[u(s)]:[u(s),u(c)]}const h={t0:0,t1:0};function N(t,e,n){const{origin:o,direction:r}=e,i=Mt;i[0]=o[0]-t[0],i[1]=o[1]-t[1],i[2]=o[2]-t[2];const s=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];if(s===0)return!1;const c=2*(r[0]*i[0]+r[1]*i[1]+r[2]*i[2]),u=c*c-4*s*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(u<0)return!1;const m=Math.sqrt(u);return n.t0=(-c-m)/(2*s),n.t1=(-c+m)/(2*s),!0}const Mt=l();function xt(t,e){return x(t,e,null)}function yt(t,e,n){if(x(t,e,n))return n;const o=Q(t,e,f.get());return $(n,e.origin,p(f.get(),e.direction,w(e.origin,o)/a(e.direction))),n}function Q(t,e,n){const o=f.get(),r=nt.get();P(o,e.origin,e.direction);const i=M(t);P(n,o,e.origin),p(n,n,1/a(n)*i);const s=U(t,e.origin),c=et(e.origin,n);return W(r,c+s,o),D(n,n,r),n}function St(t,e,n){return x(t,e,n)?n:(rt(e,t,n),L(t,n,n))}function L(t,e,n){const o=g(f.get(),e,t),r=p(f.get(),o,t[3]/a(o));return $(n,r,t)}function bt(t,e){const n=g(f.get(),e,t),o=F(n),r=t[3]*t[3];return Math.sqrt(Math.abs(o-r))}function U(t,e){const n=g(f.get(),e,t),o=a(n),r=M(t),i=r+Math.abs(r-o);return v(r/i)}const S=l();function V(t,e,n,o){const r=g(S,e,t);switch(n){case d.X:{const i=_(r,S)[2];return q(o,-Math.sin(i),Math.cos(i),0)}case d.Y:{const i=_(r,S),s=i[1],c=i[2],u=Math.sin(s);return q(o,-u*Math.cos(c),-u*Math.sin(c),Math.cos(s))}case d.Z:return G(o,r);default:return}}function X(t,e){const n=g(R,e,t);return a(n)-t[3]}function Rt(t,e,n,o){const r=X(t,e),i=V(t,e,d.Z,R),s=p(R,i,n-r);return $(o,e,s)}function At(t,e){const n=I(t,e),o=M(t);return n<=o*o}function Lt(t,e,n=E()){const o=w(t,e),r=t[3],i=e[3];return o+i<r?(b(n,t),n):o+r<i?(b(n,e),n):(J(n,t,e,(o+i-r)/(2*o)),n[3]=(o+r+i)/2,n)}const R=l(),Ot=A();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:st,altitudeAt:X,angleToSilhouette:U,axisAt:V,clear:gt,closestPoint:St,closestPointOnSilhouette:Q,containsPoint:At,copy:H,create:A,distanceToSilhouette:bt,elevate:dt,equals:ut,exactEquals:ct,fromCenterAndRadius:at,fromRadius:lt,fromValues:mt,getCenter:pt,getRadius:M,intersectLine:$t,intersectRay:x,intersectRayClosestSilhouette:yt,intersectsRay:xt,projectPoint:L,setAltitudeAt:Rt,setExtent:ht,tmpSphere:Ot,union:Lt,wrap:ft},Symbol.toStringTag,{value:"Module"}));export{xt as I,H as O,M as V,pt as Z,Z as d,Ct as p,At as s,A as w};
