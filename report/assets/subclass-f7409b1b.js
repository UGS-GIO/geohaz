import{g as wt,z as H,C as vt}from"./typedArrayUtil-2af43698.js";import{b as it,s as T,e as At,o as S,a as jt}from"./Error-21d1d076.js";import{r as Ot}from"./promiseUtils-1d963c7c.js";function Oe(t,e,n,r){var o,s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function ke(t,e){return function(n,r){e(n,r,t)}}function Te(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(l){try{u(r.next(l))}catch(f){i(f)}}function c(l){try{u(r.throw(l))}catch(f){i(f)}}function u(l){l.done?s(l.value):o(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}const kt=Symbol("Accessor-beforeDestroy");function Tt(t){return t.__accessor__??null}function Se(t,e){var n;return((n=t==null?void 0:t.metadata)==null?void 0:n[e])!=null}function St(t,e,n){return n?v(t,e,{policy:n,path:""}):v(t,e,null)}function v(t,e,n){return e?Object.keys(e).reduce((r,o)=>{const s=o;let i=null,a="merge";if(n&&(i=n.path?`${n.path}.${o}`:o,a=n.policy(i)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=it(e[s]),r;let c=r[s],u=e[s];if(c===u)return r;if(Array.isArray(u)||Array.isArray(r))c=c?Array.isArray(c)?r[s]=c.concat():r[s]=[c]:r[s]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(l=>{c.includes(l)||c.push(l)}));else if(u&&typeof u=="object")if(n){const l=n.path;n.path=i,r[s]=v(c,u,n),n.path=l}else r[s]=v(c,u,null);else r.hasOwnProperty(o)&&!e.hasOwnProperty(o)||(r[s]=u);return r},t||{}):t}function Nt(t){return Array.isArray(t)?t:t.split(".")}function X(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function Ct(t){if(Array.isArray(t)){const e=[];for(const n of t)e.push(...X(n));return e}return X(t)}function Ne(t,e,n,r){const o=Ct(e);if(o.length!==1){const s=o.map(i=>r(t,i,n));return Ot(s)}return r(t,o[0],n)}var x;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED",t[t.DESTROYED=3]="DESTROYED"})(x||(x={}));function N(t){let e=t.constructor.__accessorMetadata__;const n=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!n){e=Object.create(e);for(const r in e)e[r]=it(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function Ce(t,e){const n=N(t);let r=n[e];return r||(r=n[e]={}),r}function Ee(t,e){return St(t,e,Mt)}const Et=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Mt(t){return Et.test(t)?"replace":"merge"}function xt(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function Pt(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}let zt=class P{constructor(e,n,r,o=1,s=0){if(this._ctor=e,this._acquireFunction=n,this._releaseFunction=r,this.allocationSize=o,this._pool=new Array(s),this._initialSize=s,this._ctor)for(let i=0;i<s;i++)this._pool[i]=new this._ctor;this.allocationSize=Math.max(o,1)}destroy(){this.prune(0)}acquire(...e){let n;if(P.test.disabled)n=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let o=0;o<r;o++)this._pool[o]=new this._ctor}n=this._pool.pop()}return this._acquireFunction?this._acquireFunction(n,...e):Pt(n)&&n.acquire(...e),n}release(e){e&&!P.test.disabled&&(this._releaseFunction?this._releaseFunction(e):xt(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let n=e;n<this._pool.length;++n){const r=this._pool[n];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};zt.test={disabled:!1};var h;(function(t){t[t.Dirty=1]="Dirty",t[t.Overridden=2]="Overridden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(h||(h={}));const A={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},g=[];let $=A;function at(t){$.onObservableAccessed(t)}let m=!1,w=!1;function Dt(t,e,n){if(m)return L(t,e,n);ct(t);const r=e.call(n);return lt(),r}function Me(t,e){return Dt(A,t,e)}function L(t,e,n){const r=m;m=!0,ct(t);let o=null;try{o=e.call(n)}catch(s){w&&T.getLogger("esri.core.accessorSupport.tracking").error(s)}return lt(),m=r,o}function ct(t){$=t,g.push(t)}function lt(){const t=g.length;if(t>1){const e=g.pop();$=g[t-2],e.onTrackingEnd()}else if(t===1){const e=g.pop();$=A,e.onTrackingEnd()}else $=A}function It(t,e){if(e.flags&h.DepTrackingInitialized)return;const n=w;w=!1,e.flags&h.AutoTracked?L(e,e.metadata.get,t):Ft(t,e),w=n}const Ut=[];function Ft(t,e){e.flags&h.ExplicitlyTracking||(e.flags|=h.ExplicitlyTracking,L(e,()=>{const n=e.metadata.dependsOn||Ut;for(const r of n)if(typeof r!="string"||r.includes(".")){const o=Nt(r);for(let s=0,i=t;s<o.length&&i!=null&&typeof i=="object";++s)i=Y(i,o[s],s!==o.length-1)}else Y(t,r,!1)}),e.flags&=~h.ExplicitlyTracking)}function Y(t,e,n){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const o=Tt(t);if(o){const s=o.propertiesByName.get(r);s&&(at(s),It(t,s))}return n?t[r]:void 0}const _=[];function xe(t){_.push(t),_.length===1&&queueMicrotask(()=>{const e=_.slice();_.length=0;for(const n of e)n()})}var z;(function(t){const e=(s,i,a,c)=>{let u=i,l=i;const f=a>>>1,p=s[u-1];for(;l<=f;){l=u<<1,l<a&&c(s[l-1],s[l])<0&&++l;const K=s[l-1];if(c(K,p)<=0)break;s[u-1]=K,u=l}s[u-1]=p},n=(s,i)=>s<i?-1:s>i?1:0;function r(s,i,a,c){i===void 0&&(i=0),a===void 0&&(a=s.length),c===void 0&&(c=n);for(let l=a>>>1;l>i;l--)e(s,l,a,c);const u=i+1;for(let l=a-1;l>i;l--){const f=s[i];s[i]=s[l],s[l]=f,e(s,u,l,c)}}function*o(s,i,a,c){i===void 0&&(i=0),a===void 0&&(a=s.length),c===void 0&&(c=n);for(let l=a>>>1;l>i;l--)e(s,l,a,c),yield;const u=i+1;for(let l=a-1;l>i;l--){const f=s[i];s[i]=s[l],s[l]=f,e(s,u,l,c),yield}}t.sort=r,t.iterableSort=o})(z||(z={}));const Z=z,Rt=1.5,qt=1.1;let Pe=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new wt,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>Q(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const n=new Array;for(let r=0;r<this._length;r++){const o=this.data[r];e(o)&&n.push(o)}return n}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,n){const r=this.data.indexOf(e,n);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let n=e;n<this._length;++n)this.data[n]=this._deallocator(this.data[n]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,n=e.length){for(let r=0;r<n;r++)this.data[this._length++]=e[r]}fill(e,n){for(let r=0;r<n;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,Q(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const n=H(this.data,e,this.length,this._hint);if(n!==-1)return this.data.splice(n,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(H(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,n=e.length,r){this.length=vt(this.data,e,this.length,n,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,n){if(e>=this.length||n>=this.length||e===n)return;const r=this.data[e];this.data[e]=this.data[n],this.data[n]=r}sort(e){Z.sort(this.data,0,this.length,e)}iterableSort(e){return Z.iterableSort(this.data,0,this.length,e)}some(e,n){for(let r=0;r<this.length;++r)if(e.call(n,this.data[r],r,this.data))return!0;return!1}find(e,n){for(let r=0;r<this.length;++r){const o=this.data[r];if(e.call(n,o,r))return o}}filterInPlace(e,n){let r=0;for(let o=0;o<this._length;++o){const s=this.data[o];e.call(n,s,o,this.data)&&(this.data[o]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let o=r;o<this._length;o++)this.data[o]=this._deallocator(this.data[o]);return this._length=r,this._shrink(),this}forAll(e,n){const{data:r,length:o}=this;for(let s=0;s<o;++s)e.call(n,r[s],s,r)}forEach(e,n){this.data.slice(0,this.length).forEach(e,n)}map(e,n){const r=new Array(this.length);for(let o=0;o<this.length;++o)r[o]=e.call(n,this.data[o],o,this.data);return r}reduce(e,n){let r=n;for(let o=0;o<this.length;++o)r=e(r,this.data[o],o,this.data);return r}has(e){const n=this.length,r=this.data;for(let o=0;o<n;++o)if(r[o]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function Q(t){t.data.length>Rt*t.length&&(t.data.length=Math.floor(t.length*qt))}function De(t,e){for(const[n,r]of t)if(e(r,n))return!0;return!1}function Lt(t,e,n){const r=t.get(e);if(r!==void 0)return r;const o=n();return t.set(e,o),o}function Ie(t){const e=new Map;return n=>(e.has(n)||e.set(n,t(n)),e.get(n))}const y=()=>T.getLogger("esri.core.accessorSupport.ensureTypes");function Vt(t){return t==null?t:new Date(t)}function Bt(t){return t==null?t:!!t}function Jt(t){return t==null?t:t.toString()}function Gt(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function Kt(t){return t==null?t:Math.round(parseFloat(t))}function ut(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function j(t,e){return e!=null&&t&&!(e instanceof t)}function ft(t){return t&&"isCollection"in t}function W(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function Ht(t,e){if(!(e!=null&&e.constructor)||!ft(e.constructor))return D(t,e)?e:new t(e);const n=W(t.prototype.itemType),r=W(e.constructor.prototype.itemType);return n?r?n===r?e:n.prototype.isPrototypeOf(r.prototype)?new t(e):(D(t,e),e):new t(e):e}function D(t,e){return!!ut(e)&&(y().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+C(t)+"'"),!0)}function Xt(t,e){return e==null?e:ft(t)?Ht(t,e):j(t,e)?D(t,e)?e:new t(e):e}function C(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const Yt=new WeakMap;function Zt(t){switch(t){case Number:return Gt;case V:return Kt;case Boolean:return Bt;case String:return Jt;case Date:return Vt;default:return Lt(Yt,t,()=>Xt.bind(null,t))}}function d(t,e){const n=Zt(t);return arguments.length===1?n:n(e)}function O(t,e,n){return arguments.length===1?O.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,n)):[t(e,n)])}function Ue(t,e){return arguments.length===1?O(n=>d(t,n)):O(n=>d(t,n),e)}function pt(t,e,n){return e!==0&&Array.isArray(n)?n.map(r=>pt(t,e-1,r)):t(n)}function I(t,e,n){if(arguments.length===2)return s=>I(t,e,s);if(!n)return n;n=pt(t,e,n);let r=e,o=n;for(;r>0&&Array.isArray(o);)r--,o=o[0];if(o!==void 0)for(let s=0;s<r;s++)n=[n];return n}function Fe(t,e,n){return arguments.length===2?I(r=>d(t,r),e):I(r=>d(t,r),e,n)}function Qt(t){return!!Array.isArray(t)&&!t.some(e=>{const n=typeof e;return!(n==="string"||n==="number"||n==="function"&&t.length>1)})}function Wt(t,e){if(arguments.length===2)return Wt(t).call(null,e);const n=new Set,r=t.filter(a=>typeof a!="function"),o=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||n.add(a);let s=null,i=null;return(a,c)=>{if(a==null)return a;const u=typeof a,l=u==="string"||u==="number";return l&&(n.has(a)||o.some(f=>u==="string"&&f===String||u==="number"&&f===Number))||u==="object"&&o.some(f=>!j(a,f))?a:(l&&r.length?(s||(s=r.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),y().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&o.length?(i||(i=o.map(f=>C(f)).join(", ")),y().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${i}`)):y().error("Accessor#set",`'${a}' is not a valid value for this property`),c&&(c.valid=!1),null)}}function te(t,e){if(arguments.length===2)return te(t).call(null,e);const n={},r=[],o=[];for(const c in t.typeMap){const u=t.typeMap[c];n[c]=d(u),r.push(C(u)),o.push(c)}const s=()=>`'${r.join("', '")}'`,i=()=>`'${o.join("', '")}'`,a=typeof t.key=="string"?c=>c[t.key]:t.key;return c=>{if(t.base&&!j(t.base,c)||c==null)return c;const u=a(c)||t.defaultKeyValue,l=n[u];if(!l)return y().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${i()})`),null;if(!j(t.typeMap[u],c))return c;if(typeof t.key=="string"&&!ut(c)){const f={};for(const p in c)p!==t.key&&(f[p]=c[p]);return l(f)}return l(c)}}class V{}const Re={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function qe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function ee(t){switch(t.type){case"native":return d(t.value);case"array":return O(ee(t.value));case"one-of":return ne(t);default:return null}}function ne(t){let e=null;return(n,r)=>F(n,t)?n:(e==null&&(e=U(t)),y().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function U(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case V:return"integer";case Date:return"date";default:return C(t.value)}case"array":return`array of ${U(t.value)}`;case"one-of":{const e=t.values.map(n=>U(n));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function F(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case V:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(n=>!F(n,e.value));case"one-of":return e.values.some(n=>F(t,n))}}function re(t){if(t.json&&t.json.origins){const e=t.json.origins,n={"web-document":["web-scene","web-map"]};for(const r in n)if(e[r]){const o=e[r];n[r].forEach(s=>{e[s]=o}),delete e[r]}}}let ht=class extends At{constructor(e,n,r){super(e,n,r)}};ht.prototype.type="warning";function yt(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const R=()=>T.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function tt(t,e,n){var r,o;t&&(!n&&!e.read||(r=e.read)!=null&&r.reader||((o=e.read)==null?void 0:o.enabled)===!1||ae(t)&&S("read.reader",oe(t),e))}function oe(t){var n,r;const e=t.ndimArray??0;if(e>1)return ie(t);if(e===1)return et(t);if("type"in t&&gt(t.type)){const o=(r=(n=t.type.prototype)==null?void 0:n.itemType)==null?void 0:r.Type,s=et(typeof o=="function"?{type:o}:{types:o});return(i,a,c)=>{const u=s(i,a,c);return u&&new t.type(u)}}return B(t)}function B(t){return"type"in t?se(t.type):ce(t.types)}function se(t){return t.prototype.read?(e,n,r)=>{if(e==null)return e;const o=typeof e;if(o!=="object")return void R().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${o}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function dt(t,e,n,r){return r!==0&&Array.isArray(e)?e.map(o=>dt(t,o,n,r-1)):t(e,void 0,n)}function ie(t){const e=B(t),n=dt.bind(null,e),r=t.ndimArray??0;return(o,s,i)=>{if(o==null)return o;o=n(o,i,r);let a=r,c=o;for(;a>0&&Array.isArray(c);)a--,c=c[0];if(c!==void 0)for(let u=0;u<a;u++)o=[o];return o}}function et(t){const e=B(t);return(n,r,o)=>{if(n==null)return n;if(Array.isArray(n)){const i=[];for(const a of n){const c=e(a,void 0,o);c!==void 0&&i.push(c)}return i}const s=e(n,void 0,o);return s!==void 0?[s]:void 0}}function gt(t){if(!yt(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?J(e.Type):$t(e.Type))}function ae(t){return"types"in t?$t(t.types):J(t.type)}function J(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||gt(t))}function $t(t){for(const e in t.typeMap)if(!J(t.typeMap[e]))return!1;return!0}function ce(t){let e=null;const n=t.errorContext??"type",r=t.validate;return(o,s,i)=>{if(o==null)return o;const a=typeof o;if(a!=="object")return void R().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=le(t));const c=t.key;if(typeof c!="string")return;const u=o[c],l=u?e[u]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!l){const p=`Type '${u||"unknown"}' is not supported`;return i!=null&&i.messages&&o&&i.messages.push(new ht(`${n}:unsupported`,p,{definition:o,context:i})),void R().error(p)}const f=new l;return f.read(o,i),r?r(f):f}}function le(t){var n,r;const e={};for(const o in t.typeMap){const s=t.typeMap[o],i=N(s.prototype);if(typeof t.key=="function")continue;const a=i[t.key];if(!a)continue;(n=a.json)!=null&&n.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(e[a.json.type[0]]=s);const c=(r=a.json)==null?void 0:r.write;if(!(c!=null&&c.writer)){e[o]=s;continue}const u=c.target,l=typeof u=="string"?u:t.key,f={};c.writer(o,f,l),f[l]&&(e[f[l]]=s)}return e}function ue(t){if(t.json||(t.json={}),rt(t.json),ot(t.json),nt(t.json),t.json.origins)for(const e in t.json.origins)rt(t.json.origins[e]),ot(t.json.origins[e]),nt(t.json.origins[e]);return!0}function nt(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function rt(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function ot(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function st(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const n=(t==null?void 0:t.ndimArray)??0;t&&(n===1||"type"in t&&yt(t.type))?e.write.writer=ye:n>1?e.write.writer=de(n):e.types?Array.isArray(e.types)?e.write.writer=pe(e.types[0]):e.write.writer=fe(e.types):e.write.writer=b}function fe(t){return(e,n,r,o)=>e?bt(e,t,o)?b(e,n,r,o):void 0:b(e,n,r,o)}function bt(t,e,n){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(n!=null&&n.messages){const r=e.errorContext??"type",o=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;n&&n.messages&&t&&n.messages.push(new jt(`${r}:unsupported`,o,{definition:t,context:n})),T.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(o)}return!1}function pe(t){return(e,n,r,o)=>!e||!Array.isArray(e)?b(e,n,r,o):b(e.filter(s=>bt(s,t,o)),n,r,o)}function b(t,e,n,r){S(n,k(t,r),e)}function k(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?he(t):t}function he(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function ye(t,e,n,r){let o;t===null?o=null:t&&typeof t.map=="function"?(o=t.map(s=>k(s,r)),typeof o.toArray=="function"&&(o=o.toArray())):o=[k(t,r)],S(n,o,e)}function _t(t,e,n){return n!==0&&Array.isArray(t)?t.map(r=>_t(r,e,n-1)):k(t,e)}function de(t){return(e,n,r,o)=>{let s;if(e===null)s=null;else{s=_t(e,o,t);let i=t,a=s;for(;i>0&&Array.isArray(a);)i--,a=a[0];if(a!==void 0)for(let c=0;c<i;c++)s=[s]}S(r,s,n)}}function Ve(t,e){return G(t,"any",e==null?void 0:e.origin)}function Be(t,e){return G(t,"read",e==null?void 0:e.origin)}function Je(t,e){return G(t,"write",e==null?void 0:e.origin)}function G(t,e,n){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&n){let o;o=n==="link-chart"?r.origins[n]&&(e==="any"||e in r.origins[n])?r.origins[n]:r.origins["web-map"]:r.origins[n],o&&(e==="any"||e in o)&&(r=o)}return r}function ge(t){const e=$e(t);if(t.json.origins)for(const n in t.json.origins){const r=t.json.origins[n],o=r.types?be(r):e;tt(o,r,!1),r.types&&!r.write&&t.json.write&&t.json.write.enabled&&(r.write={...t.json.write}),st(o,r)}tt(e,t.json,!0),st(e,t.json)}function $e(t){return t.json.types?q(t.json):t.type?mt(t):q(t)}function be(t){return t.type?mt(t):q(t)}function mt(t){if(!t.type)return;let e=0,n=t.type;for(;Array.isArray(n)&&!Qt(n);)n=n[0],e++;return{type:n,ndimArray:e}}function q(t){if(!t.types)return;let e=0,n=t.types;for(;Array.isArray(n);)n=n[0],e++;return{types:n,ndimArray:e}}function _e(t){ue(t)&&(re(t),ge(t))}const E=new Set,M=new Set;function Ge(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,we(e);const n=[],r=[];let o=e.prototype;for(;o;)o.hasOwnProperty("initialize")&&!E.has(o.initialize)&&(E.add(o.initialize),n.push(o.initialize)),o.hasOwnProperty("destroy")&&!M.has(o.destroy)&&(M.add(o.destroy),r.push(o.destroy)),o=Object.getPrototypeOf(o);E.clear(),M.clear();const s=class extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(n.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let c=n.length-1;c>=0;c--)n[c].call(this)}}),r.length){let c=!1;const u=this[kt];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!c){c=!0,u.call(this);for(let l=0;l<r.length;l++)r[l].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript(...a)}}};s.__accessorMetadata__=N(e.prototype),s.prototype.declaredClass=t;const i=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:i,configurable:!0}),s}}function me(t,e){return e.get==null?function(){const n=this.__accessor__,r=n.propertiesByName.get(t);if(r===void 0)return;at(r);const o=n.store;return o.has(t)?o.get(t):r.metadata.value}:function(){const n=this.__accessor__,r=n.propertiesByName.get(t);if(r!==void 0)return r.getComputed(n)}}function we(t){const e=t.prototype,n=N(e),r={};for(const o of Object.getOwnPropertyNames(n)){const s=n[o];_e(s),r[o]={enumerable:!0,configurable:!0,get:me(o,s),set(i){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${o}' of ${this.declaredClass}`);if(a.lifecycle===x.CONSTRUCTED&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${o}' of ${this.declaredClass}`);a.set(o,i)}}else Object.defineProperty(this,o,{enumerable:!0,configurable:!0,writable:!0,value:i})}}}Object.defineProperties(t.prototype,r)}export{I as $,Fe as A,ee as B,N as C,kt as D,Be as E,Ve as F,Je as G,St as H,x as I,he as J,oe as K,Kt as L,Wt as M,Jt as N,ke as O,Ie as P,Re as Q,Te as R,te as S,V as T,qe as _,Gt as a,zt as b,Ge as c,d,Oe as e,at as f,Se as g,Dt as h,h as i,Me as j,Ft as k,Nt as l,It as m,De as n,Pe as o,xe as p,Ne as q,Lt as r,ht as s,Tt as t,Ce as u,Xt as v,O as w,Ee as x,Qt as y,Ue as z};
