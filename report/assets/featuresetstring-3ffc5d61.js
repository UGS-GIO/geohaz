import{a as o,H as s,aw as T,d as u,B as c,ax as f,b as m,r as p,ay as b,N as y,T as v,az as A,aA as x,aB as g,aC as F,aD as V,q as D,aE as j,aF as w}from"./arcadeUtils-2b696ebb.js";import"./geometry-31b45acd.js";import"./subclass-f7409b1b.js";import"./typedArrayUtil-2af43698.js";import"./Error-21d1d076.js";import"./promiseUtils-1d963c7c.js";import"./Extent-2b4578b8.js";import"./JSONSupport-acf2865c.js";import"./time-0817624a.js";import"./SpatialReference-428523ee.js";import"./jsonMap-5ba4a9c2.js";import"./request-a10d6950.js";import"./assets-6fd92e57.js";import"./cast-e7a2f9aa.js";import"./Polyline-013cde1f.js";import"./aaBoundingRect-aef00841.js";import"./Axis-30be7e73.js";import"./mathUtils-19b6edfc.js";import"./typeUtils-3056a943.js";import"./TimeOnly-e43464ca.js";import"./UnknownTimeZone-8ede07af.js";import"./datetime-7e00d9ef.js";import"./locale-bde6d0f6.js";import"./ImmutableArray-ee1d0ce7.js";import"./Field-be948aef.js";import"./enumeration-4a4e87c4.js";import"./fieldType-4834e8bc.js";import"./number-6ee739f3.js";import"./jsonUtils-2c7f966c.js";import"./featureConversionUtils-e62978d0.js";import"./aaBoundingBox-7242ce3e.js";import"./OptimizedFeature-0af09c7a.js";import"./OptimizedFeatureSet-1d1ac4b9.js";import"./OptimizedGeometry-5ad221bf.js";import"./FieldsIndex-9238b8b6.js";import"./fieldUtils-fcb2a714.js";import"./intl-fe039018.js";import"./date-7940da18.js";import"./messages-2d262041.js";import"./Portal-cb507469.js";import"./Loadable-8a1ead8b.js";import"./Promise-ec74e14b.js";function l(r,n){return r&&r.domain?r.domain.type==="coded-value"||r.domain.type==="codedValue"?y.convertObjectToArcadeDictionary({type:"codedValue",name:r.domain.name,dataType:w[r.field.type],codedValues:r.domain.codedValues.map(e=>({name:e.name,code:e.code}))},v(n)):y.convertObjectToArcadeDictionary({type:"range",name:r.domain.name,dataType:w[r.field.type],min:r.domain.minValue,max:r.domain.maxValue},v(n)):null}function ft(r){r.mode==="async"&&(r.functions.domain=function(n,e){return r.standardFunctionAsync(n,e,async(i,d,t)=>{if(o(t,2,3,n,e),s(t[0]))return l(T(t[0],u(t[1]),t[2]===void 0?void 0:t[2]),n);if(c(t[0]))return await t[0]._ensureLoaded(),l(f(u(t[1]),t[0],null,t[2]===void 0?void 0:t[2]),n);throw new m(n,p.InvalidParameter,e)})},r.functions.subtypes=function(n,e){return r.standardFunctionAsync(n,e,async(i,d,t)=>{if(o(t,1,1,n,e),s(t[0])){const a=b(t[0]);return a?y.convertObjectToArcadeDictionary(a,v(n)):null}if(c(t[0])){await t[0]._ensureLoaded();const a=t[0].subtypeMetaData();return a?y.convertObjectToArcadeDictionary(a,v(n)):null}throw new m(n,p.InvalidParameter,e)})},r.functions.domainname=function(n,e){return r.standardFunctionAsync(n,e,async(i,d,t)=>{if(o(t,2,4,n,e),s(t[0]))return A(t[0],u(t[1]),t[2],t[3]===void 0?void 0:t[3]);if(c(t[0])){await t[0]._ensureLoaded();const a=f(u(t[1]),t[0],null,t[3]===void 0?void 0:t[3]);return x(a,t[2])}throw new m(n,p.InvalidParameter,e)})},r.signatures.push({name:"domainname",min:2,max:4}),r.functions.domaincode=function(n,e){return r.standardFunctionAsync(n,e,async(i,d,t)=>{if(o(t,2,4,n,e),s(t[0]))return g(t[0],u(t[1]),t[2],t[3]===void 0?void 0:t[3]);if(c(t[0])){await t[0]._ensureLoaded();const a=f(u(t[1]),t[0],null,t[3]===void 0?void 0:t[3]);return F(a,t[2])}throw new m(n,p.InvalidParameter,e)})},r.signatures.push({name:"domaincode",min:2,max:4})),r.functions.text=function(n,e){return r.standardFunctionAsync(n,e,(i,d,t)=>{if(o(t,1,2,n,e),!c(t[0]))return V(t[0],t[1]);{const a=D(t[1],"");if(a==="")return t[0].castToText();if(a.toLowerCase()==="schema")return t[0].convertToText("schema",i.abortSignal);if(a.toLowerCase()==="featureset")return t[0].convertToText("featureset",i.abortSignal)}})},r.functions.gdbversion=function(n,e){return r.standardFunctionAsync(n,e,async(i,d,t)=>{if(o(t,1,1,n,e),s(t[0]))return t[0].gdbVersion();if(c(t[0]))return(await t[0].load()).gdbVersion;throw new m(n,p.InvalidParameter,e)})},r.functions.schema=function(n,e){return r.standardFunctionAsync(n,e,async(i,d,t)=>{if(o(t,1,1,n,e),c(t[0]))return await t[0].load(),y.convertObjectToArcadeDictionary(t[0].schema(),v(n));if(s(t[0])){const a=j(t[0]);return a?y.convertObjectToArcadeDictionary(a,v(n)):null}throw new m(n,p.InvalidParameter,e)})}}export{ft as registerFunctions};
