import{a as g,G as v,Y as m,K as w,t as y,T as d,A as p,F as P,b as o,C as S}from"./request-a10d6950.js";function U(t,r){var e;const n=(e=r==null?void 0:r.url)==null?void 0:e.path;if(t&&n&&(t=g(t,n,{preserveProtocolRelative:!0}),r.portalItem&&r.readResourcePaths)){const s=v(t,r.portalItem.itemUrl);s!=null&&b.test(s)&&r.readResourcePaths.push(r.portalItem.resourceFromPath(s).path)}return(t=f(t,r==null?void 0:r.portal))&&l.test(t)?O(t):t}function x(t,r,n=c.YES){var s,a;if((t=t&&l.test(t)?R(t):t)==null)return t;!m(t)&&(r!=null&&r.blockedRelativeUrls)&&r.blockedRelativeUrls.push(t);let e=g(t);if(r){const i=((s=r.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((a=r.url)==null?void 0:a.path);if(i){const u=f(i,r.portal),h=f(e,r.portal);e=v(h,u,u),e!=null&&e!==h&&e!==t&&r.verifyItemRelativeUrls&&r.verifyItemRelativeUrls.writtenUrls.push(e)}}return e=I(e,r==null?void 0:r.portal),m(e)&&(e=w(e)),r!=null&&r.resources&&(r!=null&&r.portalItem)&&!m(e)&&!y(e)&&n===c.YES&&r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(e),compress:!1}),e}function K(t,r,n){return U(t,n)}function _(t,r,n,e){const s=x(t,e);s!==void 0&&(r[n]=s)}const l=/\/items\/([^\/]+)\/resources\/(.*)/,b=/^\.\/resources\//;function F(t){const r=(t==null?void 0:t.match(l))??null;return(r==null?void 0:r[1])??null}function N(t){const r=(t==null?void 0:t.match(l))??null;if(r==null)return null;const n=r[2],e=n.lastIndexOf("/");if(e===-1){const{path:i,extension:u}=d(n);return{prefix:null,filename:i,extension:u}}const{path:s,extension:a}=d(n.slice(e+1));return{prefix:n.slice(0,e),filename:s,extension:a}}function I(t,r){return r&&!r.isPortal&&r.urlKey&&r.customBaseUrl?p(t,`${r.urlKey}.${r.customBaseUrl}`,r.portalHostname):t}function f(t,r){if(!r||r.isPortal||!r.urlKey||!r.customBaseUrl)return t;const n=`${r.urlKey}.${r.customBaseUrl}`,e=S();return P(e,`${e.scheme}://${n}`)?p(t,r.portalHostname,n):p(t,n,r.portalHostname)}function O(t){if(!t)return t||null;let r=t;return r&&o&&!o.findCredential(r)&&(r=o._normalizeAGOLorgDomain(r),r=r.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),r=r.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),r=r.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),r}function R(t){if(!t)return t||null;let r=t;return r=r.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),r=r.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),r=r.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),r&&o&&!o.findCredential(r)&&(r=o._normalizeAGOLorgDomain(r)),r}var c;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(c||(c={}));const C=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return c},ensureMainOnlineDomain:I,fromCDNUrl:R,fromJSON:U,itemIdFromResourceUrl:F,prefixAndFilenameFromResourceUrl:N,read:K,toCDNUrl:O,toJSON:x,write:_},Symbol.toStringTag,{value:"Module"}));export{O as I,c as R,I as U,_ as f,F as g,x as m,K as p,U as u,N as v,C as w};
